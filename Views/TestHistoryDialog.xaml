<Window x:Class="AutoRegressionVM.Views.TestHistoryDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="테스트 이력" Height="600" Width="900"
        WindowStartupLocation="CenterOwner"
        MinWidth="700" MinHeight="400">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 필터 영역 -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
            <TextBlock Text="기간:" VerticalAlignment="Center" Margin="0,0,5,0"/>
            <DatePicker x:Name="dpFrom" Width="120" Margin="0,0,10,0"/>
            <TextBlock Text="~" VerticalAlignment="Center" Margin="0,0,10,0"/>
            <DatePicker x:Name="dpTo" Width="120" Margin="0,0,20,0"/>
            <TextBlock Text="시나리오:" VerticalAlignment="Center" Margin="0,0,5,0"/>
            <ComboBox x:Name="cboScenario" Width="200" Margin="0,0,10,0"/>
            <Button Content="검색" Click="Search_Click" Width="60" Margin="0,0,10,0"/>
            <Button Content="초기화" Click="Reset_Click" Width="60"/>
        </StackPanel>

        <!-- 이력 목록 -->
        <DataGrid Grid.Row="1" x:Name="dgHistory"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  SelectionMode="Single"
                  SelectionChanged="History_SelectionChanged">
            <DataGrid.Columns>
                <DataGridTextColumn Header="시나리오" Binding="{Binding ScenarioName}" Width="150"/>
                <DataGridTextColumn Header="시작 시간" Binding="{Binding StartTime, StringFormat=yyyy-MM-dd HH:mm:ss}" Width="140"/>
                <DataGridTextColumn Header="소요 시간" Binding="{Binding Duration, StringFormat=mm\\:ss}" Width="80"/>
                <DataGridTextColumn Header="성공" Binding="{Binding PassedCount}" Width="50"/>
                <DataGridTextColumn Header="실패" Binding="{Binding FailedCount}" Width="50"/>
                <DataGridTextColumn Header="오류" Binding="{Binding ErrorCount}" Width="50"/>
                <DataGridTemplateColumn Header="결과" Width="60">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding IsSuccess}" FontWeight="Bold">
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding IsSuccess}" Value="True">
                                                <Setter Property="Text" Value="성공"/>
                                                <Setter Property="Foreground" Value="Green"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding IsSuccess}" Value="False">
                                                <Setter Property="Text" Value="실패"/>
                                                <Setter Property="Foreground" Value="Red"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>

        <!-- 하단 버튼 -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
            <Button Content="HTML 리포트 열기" Click="OpenHtmlReport_Click" Width="120" Margin="0,0,10,0"/>
            <Button Content="JSON 내보내기" Click="ExportJson_Click" Width="100" Margin="0,0,10,0"/>
            <Button Content="삭제" Click="Delete_Click" Width="60" Margin="0,0,10,0"/>
            <Button Content="닫기" Click="Close_Click" Width="60" IsCancel="True"/>
        </StackPanel>
    </Grid>
</Window>
